<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title>Update Account</title>
        <style type="text/css">
            table.hovertable {
                font-family: verdana,arial,sans-serif;
                font-size:11px;
                color:#333333;
                border-width: 1px;
                border-color: #999999;
                border-collapse: collapse;
            }
            table.hovertable th {
                background-color:#c3dde0;
                border-width: 1px;
                padding: 8px;
                border-style: solid;
                border-color: #a9c6c9;
            }
            table.hovertable tr {
                background-color:#d4e3e5;
            }
            table.hovertable td {
                border-width: 1px;
                padding: 8px;
                border-style: solid;
                border-color: #a9c6c9;
            }
        </style>

    </h:head>

    <h:body>
        <ui:composition template="/Templates/InternalAggregateTemplate.xhtml">
            <ui:define name="contents">
                <h:form id="form1" prependId='false'>

                    <p:messages globalOnly="false" id="messages" autoUpdate="false" closable="true" />
                    <table class="hovertable">

                        <tr height="30" onmouseover="this.style.backgroundColor = '#ffff66';" onmouseout="this.style.backgroundColor = '#d4e3e5';">
                            <td><strong>Staff Name</strong></td>
                            <td>#{staffAccountManagedBean.findStaff().firstName} #{staffAccountManagedBean.findStaff().lastName}</td>
                        </tr>
                        <tr height="30" onmouseover="this.style.backgroundColor = '#ffff66';" onmouseout="this.style.backgroundColor = '#d4e3e5';">
                            <td><strong>Staff Id</strong></td>
                            <td>#{staffAccountManagedBean.findStaff().id}</td>
                        </tr>
                        <tr height="30" onmouseover="this.style.backgroundColor = '#ffff66';" onmouseout="this.style.backgroundColor = '#d4e3e5';">
                            <td><strong>Staff Email Address</strong></td>
                            <td>
                                <p:inplace id="emailAddr" editor="true">
                                    <p:ajax event="save" listener="#{staffAccountManagedBean.save}" update="emailAddr"/>
                                    <p:inputText value="#{staffAccountManagedBean.emailAddr}" required="true" label="text" />
                                </p:inplace>
                            </td>
                        </tr>

                        <tr height="30" onmouseover="this.style.backgroundColor = '#ffff66';" onmouseout="this.style.backgroundColor = '#d4e3e5';">
                            <td><strong>Staff NetId</strong></td>
                            <td>#{staffAccountManagedBean.staffAccountId}</td>
                        </tr>
                        <tr height="30" onmouseover="this.style.backgroundColor = '#ffff66';" onmouseout="this.style.backgroundColor = '#d4e3e5';">
                            <td><strong>Staff NetPassword</strong></td>
                            <td><p:commandButton id="effectsDialogButton" value="Reset Password" icon="ui-icon-pencil" oncomplete="dlg3.show();"/> 
                                <p:dialog id="dddd" widgetVar="dlg3" showEffect="explode"> 
                                
                                    <p:panelGrid columns="3" >
                                        <f:facet name="header">
                                            Reset Password
                                        </f:facet>
                                        
                                        <h:outputLabel for="oldPass" value="Old Password: *" />
                                        <h:inputSecret id="oldPass" value="#{staffAccountManagedBean.oldPassword}" required="true" >
                                            <f:validateLength minimum="8" maximum="25" />
                                        </h:inputSecret>
                                        <p:messages for="oldPass" />
                                        
                                        <h:outputLabel for="newPass" value="New Password: *" />
                                        <h:inputSecret id="newPass" value="#{staffAccountManagedBean.newPassword}" required="true" >
                                            <f:validateLength minimum="8" maximum="25" />
                                        </h:inputSecret>
                                        <p:messages for="newPass" />                                        
                                        
                                        <h:outputLabel for="newPassRe" value="Re-Enter New Password: *" />
                                        <h:inputSecret id="newPassRe" value="#{staffAccountManagedBean.newPasswordReEnter}" required="true" >
                                            <f:validateLength minimum="8" maximum="25" />
                                        </h:inputSecret>
                                        <p:messages for="newPassRe" />
                                        
                                        <f:facet name="footer">
                                            <p:commandButton value="Reset" type="submit" action="#{staffAccountManagedBean.resetStaffPassword()}" update="messages" oncomplete="dlg3.hide();" />
                                        </f:facet>
                                        
                                    </p:panelGrid>
                                        
                                </p:dialog>
                            </td>                           
                        </tr>

                    </table>
                </h:form>

            </ui:define>
        </ui:composition>
    </h:body>

</html>

